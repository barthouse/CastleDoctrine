#!/bin/sh

#
# Modification History
#
# 2007-November-12   Jason Rohrer
# Copied from Cultivation build.
#


if [ $# -lt 3 ] ; then
   echo "Usage: $0 release_name unix_platform_name path_to_SDL.framework"
   exit 1
fi


rm -rf mac

mkdir mac



mkdir mac/CastleDoctrine_$1
mkdir mac/CastleDoctrine_$1/graphics
mkdir mac/CastleDoctrine_$1/gameElements
mkdir mac/CastleDoctrine_$1/settings
mkdir mac/CastleDoctrine_$1/languages



cp ../gameSource/graphics/*.tga mac/CastleDoctrine_$1/graphics
cp ../gameSource/settings/*.ini mac/CastleDoctrine_$1/settings
cp ../gameSource/languages/*.txt mac/CastleDoctrine_$1/languages
cp ../gameSource/language.txt mac/CastleDoctrine_$1

cp -r ../gameSource/gameElements/* mac/CastleDoctrine_$1/gameElements/



cp -r macOSX/CastleDoctrine.app mac/CastleDoctrine_$1/CastleDoctrine.app
cp ../gameSource/CastleDoctrine mac/CastleDoctrine_$1/CastleDoctrine.app/Contents/MacOS

rm -r mac/CastleDoctrine_$1/CastleDoctrine.app/Contents/MacOS/empty.txt
rm -r mac/CastleDoctrine_$1/CastleDoctrine.app/Contents/Frameworks/empty.txt

# install SDL framework
cp -r $3 mac/CastleDoctrine_$1/CastleDoctrine.app/Contents/Frameworks/

cd mac
tar cf "CastleDoctrine_$1_$2.tar" CastleDoctrine_$1
gzip "CastleDoctrine_$1_$2.tar"







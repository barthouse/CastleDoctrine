All returns are whitespace-delimited.



Most calls can return 'DENIED' on failure




=== Call:
server.php?action=check_user&email=[signup email address]

Returns:
minVersionNumber
userID
sequenceNumber

Where:
minVersionNumber = minimum client version number compatible with this server
userID = unique user ID number
sequenceNumber = sequence number for sha1 secure hashing of download keys
                 to sign future transactions.  Any transactions using
                 lower sequence numbers will be denied as stale replays. 




== General Note:
To verify the identity of the user making each transaction, a hash of
that user's original download ticket ID is included with the transaction call.
That hash is constructed in the following way:

  sha1( download_ticket_id . sequence_number )

Where the download ticket ID is concatonated with the ascii, base-10 
representation of the sequence number.

Each transaction updates the sequence number associated with the user on
the server.  Each subsequent transaction must use a new sequence number to
thwart replay attacks.

Thus, the ticket ID is never sent from the client to the server, yet the
server can verify that the client making the transaction is indeed in 
possession of the ticket ID (which only one person in the world should have).




=== Call:
server.php?action=check_hash&user_id=[id number]
                            &sequence_number=[number]
                            &ticket_hash=[sha1 hash, hex-encoded]
Returns:
OK





=== Call:
server.php?action=start_edit_house&user_id=[id number]
                                  &sequence_number=[number]
                                  &ticket_hash=[sha1 hash, hex-encoded]
Returns:
houseMap

Where:
houseMap = ASCII string representing the house layout






=== Call:
server.php?action=end_edit_house&user_id=[id number]
                                &sequence_number=[number]
                                &ticket_hash=[sha1 hash, hex-encoded]
                                &house_map=[house map ASCII string]
Returns:
OK





=== Call:
server.php?action=ping_house&user_id=[id number]
                            &sequence_number=[number]
                            &ticket_hash=[sha1 hash, hex-encoded]
Returns:
OK

Note:
Proves that house is still being actively edited or robbed, keeping the
house checked out.  Without regular pings, the house will time out
and automatically check back in




=== Call:
server.php?action=list_houses&user_id=[id number]
                             &skip=[number]
                             &limit=[number]
                             &sequence_number=[number]
                             &ticket_hash=[sha1 hash, hex-encoded]
Returns:
user_id#character_name#last_robber_name#loot_value#rob_attempts
user_id#character_name#last_robber_name#loot_value#rob_attempts
user_id#character_name#last_robber_name#loot_value#rob_attempts
user_id#character_name#last_robber_name#loot_value#rob_attempts
....

Where:
character_name and last_robber_name have spaces repaced by "_"

Note:
Lists only robbable houses.
Returns at most [limit] houses, skipping the first [skip] houses.





=== Call:
server.php?action=start_rob_house&user_id=[id number]
                                 &to_rob_user_id=[id number]
                                 &sequence_number=[number]
                                 &ticket_hash=[sha1 hash, hex-encoded]
Returns:
houseMap

Where:
houseMap = ASCII string representing the house layout






=== Call:
server.php?action=end_rob_house&user_id=[id number]
                               &sequence_number=[number]
                               &ticket_hash=[sha1 hash, hex-encoded]
                               &success=[0 or 1]
							   $loadout=[loadout as ASCII string]
                               &move_list=[move list as ASCII string]
                               &house_map=[house map ASCII string]
Returns:
OK





=== Call:
server.php?action=list_loggged_robberies&user_id=[id number]
                                        &skip=[number]
                                        &limit=[number]
                                        &sequence_number=[number]
                                        &ticket_hash=[sha1 hash, hex-encoded]
Returns:
log_id#character_name#last_robber_name#loot_value#rob_attempts
log_id#character_name#last_robber_name#loot_value#rob_attempts
log_id#character_name#last_robber_name#loot_value#rob_attempts
log_id#character_name#last_robber_name#loot_value#rob_attempts
....

Where:
character_name and last_robber_name have spaces repaced by "_"

Note:
Lists only logged successful robberies, where last_robber_name is the name
of the successful robber, and loot_value is the value of loot taken.
Returns at most [limit] houses, skipping the first [skip] houses.




=== Call:
server.php?action=get_robbery_log&user_id=[id number]
                                 &sequence_number=[number]
                                 &ticket_hash=[sha1 hash, hex-encoded]
                                 &log_id=[id_number]
Returns:
robber_name
victim_name
houseMap
loadout
moveList

Where
robber_name and victim_name have spaces repaced by "_"
houseMap = ASCII string representing the house layout
loadout = ASCII string representing loadout
moveList = ASCII string representing moves made
